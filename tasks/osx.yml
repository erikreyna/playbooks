- name: Osx Tasks
  become: "{{ should_be_root }}"
  block:
    - name: Copy .osx dotfile from template
      ansible.builtin.command: cp templates/.osx $HOME/.osx
      changed_when: false
      tags:
        - osx
    # TODO: Use sudo once .osx can be run via root with no user interaction.
    - name: Run .osx dotfiles.
      ansible.builtin.command: "{{ osx_script }}"
      changed_when: false
      tags:
        - osx
    - name: Cleanup
      ansible.builtin.file:
        state: absent
        path: $HOME/.osx
      changed_when: false
      tags:
        - osx
